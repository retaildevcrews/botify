AZURE_OPENAI_API_KEY=
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_DEPLOYMENT=
AZURE_OPENAI_API_VERSION=2024-10-01-preview

# Realtime tuning
REALTIME_TEXT_ONLY=false
REALTIME_AUTO_CLOSE=false
REALTIME_VOICE=alloy
REALTIME_HEARTBEAT_SEC=10
REALTIME_MAX_MSG_MB=15
# Upstream -> client event filtering (comma-separated glob patterns). Default forwards only text stream events.
# Examples:
#   response.text.*            # all text streaming events
#   response.*.done            # only done events of any response subtype
#   <binary>,response.*        # allow binary frames and any JSON response.*
#   *                          # everything
REALTIME_ALLOWED_EVENT_TYPES=response.text.done,response.text.delta
# Optional: Turn detection (VAD). Supported: server_vad, semantic_vad, none
# Default is unset/none (turn_detection not sent). When enabled, additional knobs:
REALTIME_TURN_DETECTION_TYPE=semantic_vad
# Server VAD tuning
# REALTIME_TURN_DETECTION_SERVER_THRESHOLD=0.5
# REALTIME_TURN_DETECTION_SERVER_PREFIX_PADDING_MS=300
# REALTIME_TURN_DETECTION_SERVER_SILENCE_DURATION_MS=500
# Conversation-mode flags (optional; ignored outside conversation mode by upstream)
# REALTIME_TURN_DETECTION_CREATE_RESPONSE=true
# REALTIME_TURN_DETECTION_INTERRUPT_RESPONSE=true
# Semantic VAD tuning
REALTIME_TURN_DETECTION_SEMANTIC_EAGERNESS=auto   # low|medium|high|auto

# Prompt + menu inputs (resolved relative to apps/api)
REALTIME_MENU_PATH=menu/menu.ts
REALTIME_TEMPLATE_PATH=prompt_templates/template.txt

# Logging
LOG_LEVEL=DEBUG

# -----------------------------
# Optional: JSON extraction examples
# -----------------------------
# The proxy can extract and forward only the JSON object embedded in certain
# upstream text events (disabled by default). To enable for the final text event:
#
# Forward only the final text event (optional but recommended when extracting):
# REALTIME_ALLOWED_EVENT_TYPES=response.text.done
#
# Enable extraction for response.text.done and read from the `text` field:
# REALTIME_EXTRACT_JSON_FROM_TEXT_TYPES=response.text.done
# REALTIME_EXTRACT_FIELDS_MAP=response.text.done:text
#
# Extraction strategy: prefer ```json fenced block, else first JSON object found
# REALTIME_EXTRACT_JSON_STRATEGY=fenced_or_bare
#
# Output mode: send only the extracted JSON object (or use `wrap` for an envelope)
# REALTIME_EXTRACT_OUTPUT_MODE=replace
#
# On failure: drop the event (alternatives: forward | error)
# REALTIME_EXTRACT_ON_FAIL=drop
#JSON Extraction
REALTIME_ALLOWED_EVENT_TYPES=response.text.done
REALTIME_EXTRACT_JSON_FROM_TEXT_TYPES=response.text.done
REALTIME_EXTRACT_FIELDS_MAP=response.text.done:text
